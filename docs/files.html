<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Additional Files</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="pandoc.css" />
</head>
<body>
<h1 id="additional-files-user-by-siteclass">Additional Files User by SiteClass</h1>
<hr />
<h2 id="the-mysitemapjson-file">The 'mysitemap.json' File</h2>
<p>The file 'siteload.php' is in the vendor/bartonlp/site-class/includes directory.</p>
<p>The 'mysitemap.json' file is the site configuration file. 'siteload.php' loads the 'mysitemap.json' file that is in the current directory. If a 'mysitemap.json' file is not found in the current directory the parent directory is searched and this continues up until the DocuementRoot is searched and if still not found an exception is thrown.</p>
<p>Once a 'mysitemap.json' file is found the information in it is read in via 'file_get_contents()'. The information from the 'mysitemap.json' file is converted into a PHP object and returned as a PHP object.</p>
<p>My usual directory structure starts under a 'www' subdirectory. On an Apache2 host the structure looks like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="ex">/var/www/vendor</span>          // this is the <span class="st">&#39;composer&#39;</span> directory where the <span class="st">&#39;bartonlp/site-class&#39;</span> resides</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="ex">/var/www/html</span>            // this is where your php files and js, css etc. </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>                         <span class="ex">//</span> directories live</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="ex">/var/www/html/includes</span>   // this is where <span class="st">&#39;headFile&#39;</span>, <span class="st">&#39;bannerFile&#39;</span>, </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>                         <span class="ex">//</span> <span class="st">&#39;footerFile&#39;</span> and child classes live</span></code></pre></div>
<p>If I have multiple virtual hosts they are all off the '/var/www' directory instead of a single 'html' directory.</p>
<h2 id="how-the-xxxfile-files-look">How the xxxFile files look</h2>
<p>In the 'mysitemap.json' file there can be three elements that describe the location of special files. These are 1) 'headFile', 2) 'bannerFile' and 3) 'footerFile'.</p>
<p>I put the three special file in my '/var/www/html/includes' directory (where 'html' may be one of your virtual hosts and not named 'html').</p>
<p>Here is an example of my 'headFile':</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode php"><code class="sourceCode php"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="kw">&lt;?php</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="kw">if</span><span class="ot">(</span>!<span class="fu">class_exists</span><span class="ot">(</span><span class="st">&#39;Database&#39;</span><span class="ot">))</span> <span class="fu">header</span><span class="ot">(</span><span class="st">&quot;location: https://bartonlp.com/otherpages/NotAuthorized.php&quot;</span><span class="ot">);</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a><span class="kw">return</span> <span class="kw">&lt;&lt;&lt;EOF</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a><span class="st">&lt;head&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a><span class="st">  &lt;!-- .../includes/head.i.php --&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;title</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;base</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;viewport</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;charset</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;copyright</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;author</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;desc</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;keywords</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;meta</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;canonical</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;favicon</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;defaultCss</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;link</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true"></a><span class="st">  </span><span class="kw">$jQuery</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true"></a><span class="st">  </span><span class="kw">$trackerStr</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;extra</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;script</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;inlineScript</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true"></a><span class="st">  </span><span class="kw">$h</span><span class="st">-&gt;css</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true"></a><span class="st">&lt;/head&gt;</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true"></a><span class="st">EOF;</span></span></code></pre></div>
<p>All of the <em>$h</em>, <em>jQuery</em> and <em>trackerStr</em> properties are created by <em>SiteClass</em>.</p>
<p>These 'xxxFile' files return their contents.</p>
<p>You will see, if you delve into the SiteClass code, that many things can be passed to the getPageTopBottom method, which is in the method getPageHead() in SiteClass.clas.php. The standard things are:</p>
<ul>
<li>title</li>
<li>desc</li>
<li>link</li>
<li>extra</li>
<li>script</li>
<li>inlineScript</li>
<li>css</li>
</ul>
<p>I set the properties of <em>$S</em> before calling <code>getPageTopBottom();</code>. For example it might look like this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode php"><code class="sourceCode php"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="kw">$_site</span> = <span class="kw">require_once</span> <span class="fu">getenv</span><span class="ot">(</span><span class="st">&quot;SITELOADNAME&quot;</span><span class="ot">);</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="kw">$S</span> = <span class="kw">new</span> SiteClass<span class="ot">(</span><span class="kw">$_site</span><span class="ot">);</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a><span class="kw">$S</span>-&gt;title = <span class="st">&#39;my title&#39;</span><span class="ot">;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="kw">$S</span>-&gt;desc = <span class="st">&#39;This is the description&#39;</span><span class="ot">;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a><span class="kw">$S</span>-&gt;<span class="fu">link</span> = <span class="st">&#39;&lt;link rel=&quot;stylesheet&quot; href=&quot;test.css&quot;&gt;&#39;</span><span class="ot">;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a><span class="kw">$S</span>-&gt;extra = <span class="st">&#39;&lt;!-- this can be anything from a meta, link, script etc --&gt;&#39;</span><span class="ot">;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a><span class="kw">$S</span>-&gt;h_script = <span class="st">&#39;&lt;script&gt; var a=&quot;test&quot;; &lt;/script&gt;&#39;</span><span class="ot">;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a><span class="kw">$S</span>-&gt;css = <span class="st">&#39;/* some css */ #test { width: 10px; };</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a><span class="st">$S-&gt;h_inlineScript = &lt;&lt;&lt;EOF</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a><span class="st">var test;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a><span class="st">EOF;</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true"></a><span class="st">[$top, $footer] = $S-&gt;getPageTopBottom();</span></span></code></pre></div>
<p>As these special files are PHP files you can do anything else that you need to, including database queries. For example, to do a query do <code>$this-&gt;query($sql);</code> not <code>$S-&gt;query($sql);</code>.</p>
<p>I usually call these files 'head.i.php', 'banner.i.php' and 'footer.i.php' but you can name them anything you like. These files are read via 'require' in methods in SiteClass.class.php. In the 'mysitemap.json' just add the relitive or full path to the file. For example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="er">/*</span> <span class="er">This</span> <span class="er">is</span> <span class="er">a</span> <span class="er">comment.</span> <span class="er">This</span> <span class="er">file</span> <span class="er">allows</span> <span class="er">comments,</span> <span class="er">a</span> <span class="er">true</span> <span class="er">JSON</span> <span class="er">file</span> <span class="er">does</span> <span class="er">not</span> <span class="er">*/</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="fu">{</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>    <span class="dt">&quot;siteDomain&quot;</span><span class="fu">:</span> <span class="st">&quot;localhost&quot;</span><span class="fu">,</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>    <span class="dt">&quot;siteName&quot;</span><span class="fu">:</span> <span class="st">&quot;YourSiteName&quot;</span><span class="fu">,</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>    <span class="dt">&quot;className&quot;</span><span class="fu">:</span> <span class="st">&quot;SiteClass&quot;</span><span class="fu">,</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>    <span class="dt">&quot;copyright&quot;</span><span class="fu">:</span> <span class="st">&quot;Barton L. Phillips&quot;</span><span class="fu">,</span> <span class="er">//</span> <span class="er">The</span> <span class="er">copyrite</span> <span class="er">date</span> <span class="er">is</span> <span class="er">filled</span> <span class="er">in</span> <span class="er">by</span> <span class="er">SiteClass</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>    <span class="dt">&quot;memberTable&quot;</span><span class="fu">:</span> <span class="st">&quot;members&quot;</span><span class="fu">,</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a>    <span class="dt">&quot;noTrack&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a>    <span class="dt">&quot;dbinfo&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true"></a>        <span class="dt">&quot;host&quot;</span><span class="fu">:</span> <span class="st">&quot;localhost&quot;</span><span class="fu">,</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true"></a>        <span class="dt">&quot;user&quot;</span><span class="fu">:</span> <span class="st">&quot;YOUR_DATABASE_USER&quot;</span><span class="fu">,</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true"></a>        <span class="dt">&quot;database&quot;</span><span class="fu">:</span> <span class="st">&quot;test.sdb&quot;</span><span class="fu">,</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true"></a>        <span class="dt">&quot;engine&quot;</span><span class="fu">:</span> <span class="st">&quot;mysqli&quot;</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true"></a>    <span class="fu">},</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true"></a>    <span class="dt">&quot;headFile&quot;</span><span class="fu">:</span> <span class="st">&quot;includes/head.i.php&quot;</span><span class="fu">,</span> <span class="er">//</span> <span class="er">relative</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true"></a>    <span class="dt">&quot;bannerFile&quot;</span><span class="fu">:</span> <span class="st">&quot;includes/banner.i.php&quot;</span><span class="fu">,</span> </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true"></a>    <span class="dt">&quot;footerFile&quot;</span><span class="fu">:</span> <span class="st">&quot;/var/www/html/includes/footer.i.php // full path</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true"></a><span class="st">}</span></span></code></pre></div>
<p>Note, the <em>mysitemap.json</em> is not really a JSON file because you can add comments to the file. I remove the comment in 'siteload'. After the comments are removed it must be a legal JSON file because is is decoded via PHP the json_decode() function.</p>
<p>There is a default for the head, banner and footer section if you do not have special files. The DOCTYPE is by default <code>&lt;!DOCTYPE html&gt;</code> but that can be altered via an argument to the 'getPageTopBottom' method (<code>$S-&gt;doctype='xxx';</code>).</p>
<p>Creating the special files make the tedious boiler plate simple and yet configureable via the $S properties.</p>
<hr />
<p><a href="dbTables.html">dbTables</a><br />
<a href="siteclass.html">SiteClass Methods</a><br />
<a href="index.html">Index</a></p>
<h2 id="contact-me">Contact Me</h2>
<p>Barton Phillips : <a href="mailto://bartonphillips@gmail.com">bartonphillips@gmail.com</a><br />
Copyright © 2025 Barton Phillips<br />
Project maintained by <a href="https://github.com/bartonlp">bartonlp</a><br />
Last Modified January 1, 2025</p>
</body>
</html>
